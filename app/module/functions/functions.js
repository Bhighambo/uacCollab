function show_message(e,t="default",r=5){let n=document.getElementById("toast-example"),a=document.getElementById("title"),s=document.getElementById("content"),l=document.getElementById("icon");var i="",o="";switch(s.innerHTML=e,t){case"success":t="t-bg-success",o="bi-check-circle",i="Success";break;case"info":t="bg-secondary",o="bi-info-circle",i="Information";break;case"error":t="bg-danger",o="bi-x-octagon",i="Error";break;case"warning":t="bg-warning",o="bi-exclamation-triangle",i="Warning";break;default:o="bi-bell",i="Notification"}a.innerHTML=i,n.classList.remove("bg-primary","bg-dark","bg-danger","bg-warning","t-bg-success"),l.classList.remove("bi-check-circle","bi-info-circle","bi-x-octagon","bi-exclamation-triangle","bi-bell"),n.classList.add(t),l.classList.add(o);let c=new bootstrap.Toast(n,{autohide:!0,delay:1e3*r});c.show()}async function save(e,t,r=null){try{let n=$("#save, #login"),a=n.html();n.html('<span class="loading"></span> Chargement...').prop("disabled",!0);let s=!1,l=new FormData;Object.keys(e).forEach(t=>{let r=e[t];(r instanceof File||Array.isArray(r)&&r[0]instanceof File)&&(s=!0),Array.isArray(r)?r.forEach((e,r)=>{l.append(`${t}[${r}]`,e)}):l.append(t,r)});let i=s?l:e,o=!s&&"application/x-www-form-urlencoded; charset=UTF-8",c=!s,d=await $.ajax({url:t,type:"POST",data:i,dataType:"json",processData:c,contentType:o}),{content:u,status:g}=d;if(show_message(u,g),n.html(a).prop("disabled",!1),"success"===g)return r&&setTimeout(()=>{$("#"+r).modal("hide")},10),!0;return!1}catch(f){return $btn.html(originalText).prop("disabled",!1),show_message("Une erreur s'est produite. Veuillez r\xe9essayer : "+f,"error"),console.error("Erreur de connexion :",f),!1}}function handle_display(e){let{data:t,url:r,container:n,searchQuery:a}=e;$.ajax({url:r,type:"POST",data:t,dataType:"html",success:function(e){$("#"+n).html(e),a&&filter_data("#"+n,a)},error:function(e,t,r){show_message("Une erreur s'est produite, veuillez r\xe9essayer. : "+r,"error")}})}function filter_data(e,t){let r=$(e),n=r.find("tr"),a=!1;n.each(function(){let e=$(this),r=!1;e.find("th, td:not([hidden])").each(function(){let e=$(this);e.text().toLowerCase().includes(t.toLowerCase())&&(r=!0)}),e.toggle(r),r&&(a=!0)}),a||show_message("Aucune donn\xe9e ne correspond \xe0 votre recherche.","warning",15)}function get_value(e){return $("#"+e).val().trim()}function get_controller_url(e){return"./controllers/controller-"+e+".php"}function redirect(e){window.location.href=e}function fill_select(e,t,r){$.ajax({url:e,type:"POST",data:t,success:function(e){$("#"+r).html(e)},error:function(e,t,r){let n=`Erreur lors de la requ\xeate : ${t}, ${r}`;handle.show_message(n,"error")}})}function get_file(e){return document.getElementById(e).files[0]}export{show_message,get_value,redirect,save,get_controller_url,handle_display,fill_select,get_file};